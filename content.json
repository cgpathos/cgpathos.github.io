{"pages":[],"posts":[{"title":"TIL 시작","text":"blog 셋팅 기존 유령 블로그 jekyll 에서 hexo로 변경 테마 고르는게 제일 어려운 일 일단 자야하니까 테마는 Alpha Dust로 일단 결정","link":"/2020/05/24/2020-05-24/"},{"title":"스프링부트,JPA 책 공부","text":"스프링 부트 학습 시작 은 시작한지 좀 되긴 했지만…책산거 차근차근 처음부터 하나씩 꾹참고 기초부터 따라가보기 IntelliJ에서 gradle 프로젝트 만들고 dependency 등등 셋팅 Spring Initializer 안쓰고 수동으로 직접해보기 샘플 프로젝트 깃헙에 푸시 @SpringBootApplication, @RestController, 간단한 Dto 만들고 관련 테스트 코드 작성 JPA dependency까지만 셋팅 오늘은 여기까지만","link":"/2020/05/25/2020-05-25/"},{"title":"스프링부트,JPA 책 공부","text":"JPA 떙땡이 치치 말자 ㅡㅡ spring-data-jpa, h2 이용 CRUD api 구현","link":"/2020/05/27/2020-05-27/"},{"title":"스프링부트,JPA 책 공부","text":"머스테치로 화면 구성하기 mustache 탬플릿 엔진은 수많은 언어를 지원하는 가장 심플한 템플릿 엔진 스프링 부트에서도 공식 지원하는 템플릿 IntelliJ Community 버젼에서도 플러그인 사용이 가능해서 좋음 mustache 탬플릿 엔진을 이용해서 게시판 등록,목록,수정,삭제 기능 구현","link":"/2020/05/28/2020-05-28/"},{"title":"스프링부트,JPA 책 공부","text":"스프링 시큐리티 OAuth 2.0 구현 #1 스프링 시큐리티 셋팅 구글클라우드콘솔에서 OAuth 2.0 클라이언트 생성 구글 로그인/로그아웃 기능 구현, 게시글 권한처리 구현","link":"/2020/05/29/2020-05-29/"},{"title":"스프링부트,JPA 책 공부","text":"스프링 시큐리티 OAuth 2.0 구현 #2 세션정보 어노테이션으로 주입(?) 되도록 처리 세션정보 디비에 저장되게 처리 네이버 로그인 추가","link":"/2020/06/01/2020-06-01/"},{"title":"스프링부트,JPA 책 공부","text":"AWS ec2 작년에 크래딧 받으려고 만들어 놓은 계성 MFA 복구 못해서 새로 생성(실은 1년이 거의 다되기도 함 확인해보니 1년이 지났다!!!) 스터디한거 올려볼 ec2인스턴스 만들어보기 1년이 지났는지부터 확인했어야 하는데 몇일 해결 못하고 있던 내가 바보같다ㅠㅠ(이것도 영어로 전화받기 싫어서 포기한거다 ㅋㅋ)","link":"/2020/06/02/2020-06-02/"},{"title":"스프링부트,JPA 책 공부","text":"AWS RDS mariaDB로 RDS 생성하고 내피씨 ec2에서 연결가능하도록 설정하고 설정값 바꾼거 정상동작하는데 테스트 테이블 만들어서 이미지까지 insert해봄 이모티콘까지 되게 하려면 charset을 utf8mb4 로 하면 된다고 함 책에 나오는대로 했는데 character_set_database, collation_database죽어라 변경이 안되서 아래 쿼리로 해결 ALTER DATABASE {database_name} CHARACTER SET = ‘utf8mb4’ COLLATE = ‘utf8mb4_general_ci’;","link":"/2020/06/03/2020-06-03/"},{"title":"안드로이드 스튜디오 4.0 관심가는 피쳐만 살펴보기 1","text":"드디어 안드로이드 스튜됴 4.0 안정버젼 나왔다(지난주에…)그 중에 관심가는거 몇가지만 정리하자(나중에 회사 컬쳐로그에 글도…) Java 8+ API desugaring 기다리던게 추가된건데 생각해보니 정작 Java8 피쳐를 제대로 모른다 ㅡㅡ;;;(기초 공부좀 하자) 이번에 바뀐건지 모르겠는데 지원되지 않는 언어API는 언어 버젼에 맞게 결과물을 변환 해주는게 아니라별도의 DEX 파일로 추가해서 럴타임에 해당 라이브러리를 사용하도록 한다고 한다. 이런게 지원됨 Sequential streams (java.util.stream) A subset of java.time -&gt; 제일 원했던거 전체 지원 기능은 여기 java.util.function Recent additions to java.util.{Map,Collection,Comparator} Optionals (java.util.Optional, java.util.OptionalInt and - java.util.OptionalDouble) and some other new classes useful with the above APIs Some additions to java.util.concurrent.atomic (new methods on AtomicInteger, AtomicLong and AtomicReference) ConcurrentHashMap (with bug fixes for Android 5.0) 기능 사용하기 위한 설정 설정을 봐서는 지원되지 않는 API처리방식이 이번에 바뀐게 확실하다!! 123456789101112131415161718android { defaultConfig { // Required when setting minSdkVersion to 20 or lower multiDexEnabled true } compileOptions { // Flag to enable support for the new language APIs coreLibraryDesugaringEnabled true // Sets Java compatibility to Java 8 sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 }}dependencies { coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.5'} 참고자료 Java 8+ API desugaring support(Android Gradle Plugin 4.0.0+) Java 8+ APIs available through desugaring","link":"/2020/06/04/2020-06-04/"},{"title":"안드로이드 스튜디오 4.0 관심가는 피쳐만 살펴보기 2","text":"Gradle new options이전에는 dataBinding이나 renderScript등 의 기능을 활성화 하는 방식이 여기저기 흩어져 있었다.이제는 android.buildFeatures 안에 기능 활성화 설정을 할 수 있게 되었다. 이후 새로운 기능이 생기게 되면 기본적으론 비활성화 된다. 설정은 모듈 레밸의 build.gradle 파일에서 모듈별로 설정이 가능하다. 기능 활성화 스크립트12345678910111213141516171819202122android { // The default value for each feature is shown below. You can change the value to // override the default behavior. buildFeatures { // Determines whether to generate a BuildConfig class. buildConfig = true // Determines whether to support View Binding. // Note that the viewBinding.enabled property is now deprecated. viewBinding = false // Determines whether to support Data Binding. // Note that the dataBinding.enabled property is now deprecated. dataBinding = false // Determines whether to generate binder classes for your AIDL files. aidl= true // Determines whether to support RenderScript. renderScript = true // Determines whether to support injecting custom variables into the module’s R class. resValues = true // Determines whether to support shader AOT compilation. shaders = true }} 그리고 기능 활성화 설정 기본값을 프로젝트 레밸에서 모든 모듏에 적용되게 설정이 가능하다. 설정은 gradle.properties 에 아래와 같이 설정하면 된다. 유의해야 할 사항은 기본값을 변경하는 것일뿐 얼마든지 모듈레밸 build.gradle 파일에서 오버라이드가 가능하다. 12345android.defaults.buildfeatures.buildconfig=trueandroid.defaults.buildfeatures.aidl=trueandroid.defaults.buildfeatures.renderscript=trueandroid.defaults.buildfeatures.resvalues=trueandroid.defaults.buildfeatures.shaders=true","link":"/2020/06/05/2020-06-05/"},{"title":"스프링부트,JPA 책 공부","text":"무중단 배포 1 aws blue-green 배포 nginx 리버스 프록시를 이용한 배포 실습은 내일","link":"/2020/06/10/2020-06-10/"},{"title":"스프링부트,JPA 책 공부","text":"무중단 배포 3 크게 다른게 없는데 아무리해봐도 서비스 시작이 안됨 ㅠㅠ step2의 배포를 step3에 배포-&gt; 성공 프로파일만 real1로 바꿔서 배포-&gt; 성공 health 체크만 막고 step3 배포 시도-&gt; 성공 모든 설정 돌려서 step3 배포 시도-&gt; 성공 무중단 배포 설정 확인용 배포 시도-&gt; 실패(원인은 real2 에 포트설정 오류) real2 설정 수정해서 step3 배포 시도-&gt; 성공 결론: 왜 되는건지 모르겠다 ㅠㅠㅠ 어쨰꺼나 책 스터디 끝","link":"/2020/06/13/2020-06-13/"},{"title":"스프링부트,JPA 책 공부","text":"무중단 배포 2 nginx 설치 배포 스크립트 생성 프로파일 설정이 잘못됬는지 배포는 성공했는데 서비스 시작이 안됨이 부분은 내일 다시 살펴보는걸로 ㅠ","link":"/2020/06/11/2020-06-11/"},{"title":"스프링부트,JPA 책 공부","text":"CI 배포 자동화 travis ci 연동 s3 연동해서 파일 배포 codeDeploy 설정 자동배포 설정","link":"/2020/06/09/2020-06-09/"},{"title":"스프링부트,JPA 책 공부","text":"서버에 배포해보기 앞서 만들었던 게시판 서버에 배포 디비 h2-&gt;mariadb로 변경 설정 파일 분리 저장","link":"/2020/06/08/2020-06-08/"},{"title":"미디움에 기술글 쓰기","text":"미디움에 글 올리기회사 컬쳐로그에 썼던 글이지만 계획대로 옮겨적기 성공 오늘은 좀 날로 먹는 느낌이지만 목표한걸 했다는게 중요!!","link":"/2020/06/15/2020-06-15/"},{"title":"Android Kotlin Fundamentals Course","text":"코틀린 리마인드도 하고 기초도 리마인드 할겸 코드랩 시작(기존에 올렸던 TIL은 삭제함)01부터 하나씩","link":"/2020/06/29/2020-06-29/"},{"title":"git submodule","text":"유투브 알고리즘의 인도를 받아 생활코딩 영상봄 전부터 궁금한 부분이었는데 원하는 수준까지 잘 지원되서 나중에 모듈화가 필요한 프로젝트에 사용해볼 계획 링크는 이거 저장소 안에 저장소","link":"/2020/12/17/2020-12-17/"},{"title":"MVVM 샘플앱 만들기","text":"미뤄왔던 Clean Architecture 스러운 MVVM 샘플앱을 올림 자세한건 README에 설명","link":"/2020/12/23/MVVM-%EC%83%98%ED%94%8C%EC%95%B1-%EB%A7%8C%EB%93%A4%EA%B8%B0/"},{"title":"Hilt 스터디","text":"Hilt 가 Dagger 전체를 커버 할꺼라 생각했는데 android 연관 클래스들에 특화된 거였다. 결국 제대로 하려면 Dagger를 봐야 한다는거다 ㅠㅠ","link":"/2021/01/08/Hilt-%EC%8A%A4%ED%84%B0%EB%94%94/"},{"title":"Assisted Inject","text":"Hilt 적용 후 SunFlower 샘플에 ViewModel test코드를 살펴보다 처음보는 어노테이션이 보여서 찾게 됨.(Dagger2를 너무 대충 알아서 생긴 문제 ㅠㅠ)시작은 test코드 였는데 끝은 DI라니 ㅠㅠ Assisted InjectDI를 통해 객체를 생성할때 런타임 생성된 객체를 전달할 필요성이 있을때 사용한다.e.g. ViewModel 생성시에 SavedStateHandle전달, ViewModel 생성시에 intent로 전달받은 키값 전달, Worker에 Context나 WorkerParameters 전달 dependency 설정dagger2관련 의존성만으로 바로 사용은 불가능하고 추가로 설정이 필요하다.(라이브러리가 dagger2전용은 아니지만 여기서 찾기를 멈추기로했다. 더 알고싶다면 AssistedInject부터 시작하면 된다.) 12compileOnly &quot;com.squareup.inject:assisted-inject-annotations-dagger2:0.6.0&quot;kapt &quot;com.squareup.inject:assisted-inject-processor-dagger2:0.6.0&quot; 일반적인 Assisted Injection 사용생성자와 주입받을 필드에 어노테이션을 설정한다.ExampleClass 객체 생성을 담당할 Factory도 같이 정의해준다. 12345678910class ExampleClass @AssistedInject constructor( val age: Int, @Assisted val name: String) { // 객체 생성에 사용할 Factory @AssistedInject.Factory interface AssistedFactory { fun create(name: String): ExampleClass }} Module을 설정해 준다. Module 어노테이션에 AssistedInject_&lt;class_name&gt;::class를 추가해 줘야하지만!!! Hilt의 InstallIn을 같이 사용하는 경우는 전달하지 않아도 된다 :) 12345678// Module 설정@InstallIn(ActivityComponent::class)@AssistedModule@Moduleclass AssistedInjectModule { @Provides fun provideInt() = 33} 객체 생성 1234567891011class MainActivity: AppCompatActivity() { @Inject lateinit var exampleFactory: ExampleClass.AssistedFactory override fun onCreate(saveInstanceState: Bundle?) { ... val example = exampleFactory.create(intent.getStringExtra(&quot;name&quot;) ?: &quot;no name&quot;) Log.i(TAG, &quot;onCreate: age:${example.age}, name:${example.name}&quot;) }} ViewModel에서 사용 #1위 예제와 비슷하지만 ViewModel인 경우의 예제 123456789101112131415161718192021222324class MainViewModel @AssistedInject constructor( private val exampleInteractor: ExampleInteractor, @Assisted private val name: String ) : ViewModel() { // 객체 생성에 사용할 Factory @AssistedInject.Factory interface AssistedFactory { fun create(name: String) : MainViewModel } companion object { fun provideFactory( assistedFactory: AssistedFactory, name: String ): ViewModelProvider.Factory = object : ViewModelProvider.Factory { @Suppress(&quot;UNCHECKED_CAST&quot;) override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T { return assistedFactory.create(name) as T } } }} Module을 설정해 준다. Module 어노테이션에 AssistedInject_&lt;class_name&gt;::class를 추가해 줘야하지만!!! Hilt의 InstallIn을 같이 사용하는 경우는 전달하지 않아도 된다 :) 12345// Module 설정@InstallIn(ActivityComponent::class)@AssistedModule@Moduleinterface AssistedInjectModule Factory를 이용한 ViewModel 생성 1234567class MainActivity: AppCompatActivity() { @Inject lateinit var mainViewModelFactory: MainViewModel.AssistedFactory private val viewModel by viewModels&lt;MainViewModel&gt; { MainViewModel.provideFactory(mainViewModelFactory, &quot;pathos&quot;) }} ViewModel에서 사용 #2(Hilt)Hilt를 사용하면 대부분 알아서 해줘서 딱히 할께 없다. 주의해야 할건 @Assisted를 쓸때 Hilt의 것(androidx.hilt.Assisted)을 사용해야한다.typealias를 선언해서 어떤 어노테이션을 쓰는지 명확히 하고,커스텀 lint를 정의해서 직접 사용하는 경우 경고를 해주면 좋을듯 하다(이건 todo) 1234567891011121314// ViewModel partclass ExampleViewModel @ViewModelInject constructor( private val repo: ExampleRepository, @Assisted private val savedStateHandle: SavedStateHandle): ViewModel() { ...}// init part(using KTX extensions)@AndroidEntryPointclass ExampleActivity: AppCompacActivity() { private val exampleViewModel: ExampleViewModel by viewModels()} 참고 링크 SunFlower AssistedInject hilt-jetpack Assisted","link":"/2021/01/13/Assisted-Inject/"}],"tags":[{"name":"til","slug":"til","link":"/tags/til/"},{"name":"android","slug":"android","link":"/tags/android/"},{"name":"kotlin","slug":"kotlin","link":"/tags/kotlin/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"blog","slug":"blog","link":"/tags/blog/"},{"name":"medium","slug":"medium","link":"/tags/medium/"},{"name":"spirngboot2","slug":"spirngboot2","link":"/tags/spirngboot2/"},{"name":"jpa","slug":"jpa","link":"/tags/jpa/"},{"name":"deploy","slug":"deploy","link":"/tags/deploy/"},{"name":"nginx","slug":"nginx","link":"/tags/nginx/"},{"name":"blue_green_deploy","slug":"blue-green-deploy","link":"/tags/blue-green-deploy/"},{"name":"travis-ci","slug":"travis-ci","link":"/tags/travis-ci/"},{"name":"ci","slug":"ci","link":"/tags/ci/"},{"name":"codeDeploy","slug":"codeDeploy","link":"/tags/codeDeploy/"},{"name":"s3","slug":"s3","link":"/tags/s3/"},{"name":"android stduio4.0","slug":"android-stduio4-0","link":"/tags/android-stduio4-0/"},{"name":"java8","slug":"java8","link":"/tags/java8/"},{"name":"desugar","slug":"desugar","link":"/tags/desugar/"},{"name":"aws","slug":"aws","link":"/tags/aws/"},{"name":"rds","slug":"rds","link":"/tags/rds/"},{"name":"mariaDB","slug":"mariaDB","link":"/tags/mariaDB/"},{"name":"ec2","slug":"ec2","link":"/tags/ec2/"},{"name":"springboot","slug":"springboot","link":"/tags/springboot/"},{"name":"spring-security","slug":"spring-security","link":"/tags/spring-security/"},{"name":"oauth2.0","slug":"oauth2-0","link":"/tags/oauth2-0/"},{"name":"mustache","slug":"mustache","link":"/tags/mustache/"},{"name":"setup","slug":"setup","link":"/tags/setup/"},{"name":"git","slug":"git","link":"/tags/git/"},{"name":"submodule","slug":"submodule","link":"/tags/submodule/"},{"name":"MVVM","slug":"MVVM","link":"/tags/MVVM/"},{"name":"architecture","slug":"architecture","link":"/tags/architecture/"},{"name":"clean-architecture","slug":"clean-architecture","link":"/tags/clean-architecture/"},{"name":"di","slug":"di","link":"/tags/di/"},{"name":"hilt","slug":"hilt","link":"/tags/hilt/"},{"name":"dagger","slug":"dagger","link":"/tags/dagger/"},{"name":"dagger2","slug":"dagger2","link":"/tags/dagger2/"},{"name":"assisted","slug":"assisted","link":"/tags/assisted/"}],"categories":[]}